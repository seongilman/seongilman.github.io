---
layout: post
title: 안녕하십니까
subtitle: Each post also has a subtitle
gh-repo: daattali/beautiful-jekyll
gh-badge: [star, fork, follow]
tags: [test]
comments: true
---
```
Package samsung.eeg.edip.messenger.config;

//import org.springframework.boot.context.embedded.FilterRegistrationBean;

//import javax.servlet.Filter;

//import org.springframework.boot.context.embedded.FilterRegistrationBean;
Import org.springframework.context.annotation.Bean;
Import org.springframework.context.annotation.Configuration;
//import org.springframework.core.Ordered;
//import org.springframework.core.annotation.Order;
//import org.springframework.web.filter.CharacterEncodingFilter;
Import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
Import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

Import samsung.eeg.edip.messenger.interceptor.CommandInterceptor;

/**
* WebMvcConfig tjfwjd
* @author im.sung
*/
@Configuration
Public class WebMvcConfig extends WebMvcConfigurerAdapter {

// 인터셉터에서 @Autowired를 사용할 수 있게, 컨테이너가 해당 인터셉터 클래스를 관리하도록 빈을 생성
@Bean
public CommandInterceptor pagePopulationInterceptor() {
Return new CommandInterceptor();
}

@Override
Public void addInterceptors(InterceptorRegistry registry) {
// 기본 인터셉터 등록
// registry.addInterceptor(new CommandInterceptor());

// 위에서 생성한 빈을 주입하여 컨테이너가 관리할 수 있도록 인터셉터 등록
Registry.addInterceptor(pagePopulationInterceptor())
.addPathPatterns(“/**”)
.excludePathPatterns(“/message”) // tntlsdyd URLdls messagesms wpdhlgkrh ahems dycjddmf Intercept
.excludePathPatterns(“/test/**”); // dPdhl URL
}
}



package samsung.eeg.edip.messenger.interceptor;

Import javax.servlet.http.HttpServletRequest;
Import javax.servlet.http.HttpServletResponse;

Import org.slf4j.Logger;
Import org.slf4j.LoggerFactory;
Import org.springframework.beans.factory.annotation.Autowired;
//import org.springframework.beans.factory.annotation.Autowired;
Import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

Import samsung.eeg.edip.messenger.dao.RepositoryDAO;
//import samsung.eeg.edip.messenger.dao.RepositoryDAO;
Import samsung.eeg.edip.messenger.vo.MessageVO;

/**
* “/message”fmf wpdhlgks ahems dycjddp eogo dlsxjtpqxmgkdu
* DBdp dycjdsodurdmf wjwkd
* @author im.sung
*/
Public class CommandInterceptor extends HandlerInterceptorAdapter {

private static final Logger LOGGER = LoggerFactory.getLogger(CommandInterceptor.class);

@Autowired
private RepositoryDAO repositoryDAO;

@Override
Public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
LOGGER.info(“#####################################”);
LOGGER.info(“Interceptor > preHandle”);
LOGGER.info(“{}”, request.getRequestURL());
LOGGER.info(“message-[{}]”, request.getAttribute(“messageVO”));

if (request.getAttribute(“messageVO”) != null) {
MessageVO messageVO = (MessageVO) request.getAttribute(“messageVO”);
LOGGER.info(“ChatroomId-[{}]”, messageVO.getChatroomId());
LOGGER.info(“Sender-[{}]”, messageVO.getSender());
LOGGER.info(“SenderName-[{}]”, messageVO.getSenderName());
LOGGER.info(“SentTime-[{}]”, messageVO.getSentTime());
LOGGER.info(“ChatType-[{}]”, messageVO.getChatType());
LOGGER.info(“MessageId-[{}]”, messageVO.getMsgId());
LOGGER.info(“MessageType-[{}]”, messageVO.getMsgType());
LOGGER.info(“RequestURL-[{}]”, messageVO.getRequestUrl());
LOGGER.info(“RequestParam-[{}]”, messageVO.getParams());

try {
repositoryDAO.insertReqHist(messageVO);
} catch (Exception e) {
LOGGER.error(“{}”, e.getMessage());
}

LOGGER.info(“#####################################”);
}

return true;
}

}
```
